#+TITLE: tr39

A module for determining whether two strings are visually confusable.

Examples:

- "paypal" is visually confusable with "ğ”­ğ’¶á»¿ğ•¡ğ•’â„“", "ÏâºÑƒğ“…ğ’‚×Ÿ", "ğ”­ğ’¶á»¿ğ•¡ğ•’â„“", and
  more. According to [[https://util.unicode.org/UnicodeJsps/confusables.jsp?a=paypal&r=None][this handy tool]], there are over 1 billion visually
  confusable spellings of "paypal"
- "scope", spelled with latin characters is visually confusable with "Ñ•ÑĞ¾Ñ€Ğµ",
  spelled with Cyrillic characters.

* FAQ
** How does it work?

The escript =priv/generate= generates the =src/tr39.erl= file, using a
'confusables.txt' file as input.

** What unicode encodings/representations are supported?

Two representations of Unicode strings are supported; Erlang lists of integer
literals, and binaries encoded with UTF-8.

** Why don't you do NFD conversion before calling p/1?

Using the Erlang standard library functions for NFD conversion,
=unicode:characters_to_nfd_list/1= and =unicode:characters_to_binary/1=, I
noticed that 30 characters no longer map to their 'prototype' characters when
normalized to NFD. Here's a table:

#+begin_src
1ce	Ç
1cd	Ç
227	È§
226	È¦
11b	Ä›
11a	Äš
1e7	Ç§
1e6	Ç¦
1f5	Çµ
1d0	Ç
1cf	Ç
146	Å†
1d2	Ç’
1d1	Ç‘
150	Å
1a1	Æ¡
1a0	Æ 
21a	Èš
163	Å£
21b	È›
1d4	Ç”
1d3	Ç“
1e43	á¹ƒ
1f7d	á½½
419	Ğ™
45d	Ñ
f6	Ã¶
114bc	ğ‘’¼
114be	ğ‘’¾
1ff6	á¿¶
#+end_src

You can generate your own table like this with the =priv/nfd_false_negatives=
escript.

* Welcome contributions

If anyone is interested, we would gratefully accept contributions. Here are a
couple of ideas that might make for good contributions:

- A short-circuiting implementation of confusable/2. confusable/2 is not
  particularly effecient. It is possible to return =false= once two characters
  in the =skeleton/1='d strings do not compare equal.
